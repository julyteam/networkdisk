<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
    "http://struts.apache.org/dtds/struts-2.3.dtd">

<struts>
	<!-- 开发模式(修改struts.xml不用重启服务器） -->
	<constant name="struts.devMode" value="true" />
	
	<package name="networkdisk.user" namespace="/" extends="struts-default">
		<action name="user" class="userAction">
			<result name="success">/WEB-INF/welcome.jsp</result>
			<result name="error">/error.jsp</result>
		</action>
		<!-- 用户登录 -->
		<action name="userlogin" class="userAction" method="login">
			<result name="success">/user/home.jsp</result>
			<result name="error">/user/login.jsp</result>
		</action>
	</package>
	
	<package name="networkdisk.file" namespace="/" extends="json-default">
		<!-- 文件上传 -->
		<action name="fileupload" class="fileAction" method="fileUpLoad">
			<interceptor-ref name="fileUpload">
				<!-- 允许上传的文件大小 -->
				<param name="maximumSize">4024000</param>
			</interceptor-ref>
			<interceptor-ref name="defaultStack" />

			<result name="json" type="json">
				<param name="root">#map</param>
				<param name="excludeNullProperties">true</param>
			</result>
			
		</action>

		<!-- 根据用户id查找所有的文件 -->
		<action name="findAllByUser" class="fileAction" method="findAllByUser">
			<result name="success">/WEB-INF/listFile.jsp</result>
		</action>
	</package>
	
	<!-- 管理员 -->
	<package name="struts.admin" namespace="/" extends="struts-default">
		<action name="adminlogin" class="userAction" method="findOne">
			<result name="success">/manager/home.jsp</result>
			<result name="error">/manager/login.jsp</result>
		</action>
		<action name="getUserAll" class="userAction" method="getAll">
			<result name="success">/manager/user.jsp</result>
		</action>
	</package>
	
</struts>
